% ŠABLONA PRO PSANÍ ZÁVĚREČNÉ STUDIJNÍ PRÁCE
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Autor: Jakub Dokulil (kubadokulil99@gmail.com)
% Tato šablona byla vytvořena tak, aby pomocí ní mohli v systému LaTeX soutěžící sázet své práce a zároveň odpovídala požadavkům na formátování vyplývajícím z wordové šablony umístěné na webu soc.cz.
%
\documentclass[12pt, a4paper,
%oneside,      %% -- odkomentujte, pokud chcete svou práci mít pouze jednostrannou, mezera pro hřbet pak automaticky bude pouze na levé straně
twoside,        %% -- pro oboustranné práce, mezera pro hřbet následně střídá strany.
openright
]{report}

%% Nutné balíčky a nastavení
%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%% Proměnné
\newcommand\obor{INFORMAČNÍ TECHNOLOGIE} %% -- napiš číslo a název tvého oboru
\newcommand\kodOboru{18-20-M/01} %% -- napiš číslo a název tvého oboru
\newcommand\zamereni{se zaměřením na počítačové sítě a programování} %% -- napiš číslo a název tvého oboru
\newcommand\skola{Střední škola průmyslová a umělecká, Opava} %% vyplň název školy
\newcommand\trida{IT4} %% vyplň jméno svého konzultanta
\newcommand\jmenoAutora{Petr Mičola}  %% vyplň své jméno
\newcommand\skolniRok{2023/24} %% vyplň rok
\newcommand\datumOdevzdani{1. 1. 2024} %% vyplň rok
\newcommand\nazevPrace{Django Social Auth} %% vyplň název své práce

\title{\nazevPrace} %% -- Název tvé práce
\author{\jmenoAutora} %% -- tvé jméno
\date{\datumOdevzdani} %% -- rok, kdy píšeš SOČku

\usepackage[top=2.5cm, bottom=2.5cm, left=3.5cm, right=1.5cm]{geometry} %% nastaví okraje, left -- vnitřní okraj, right -- vnější okraj

\usepackage[czech]{babel} %% balík babel pro sazbu v češtině
\usepackage[utf8]{inputenc} %% balíky pro kódování textu
\usepackage[T1]{fontenc}
\usepackage{cmap} %% balíček zajišťující, že vytvořené PDF bude prohledávatelné a kopírovatelné

\usepackage{graphicx} %% balík pro vkládání obrázků

\usepackage{subcaption} %% balíček pro vkládání podobrázků

\usepackage{hyperref} %% balíček, který v PDF vytváří odkazy

\linespread{1.25} %% řádkování
\setlength{\parskip}{0.5em} %% odsazení mezi odstavci


\usepackage[pagestyles]{titlesec} %% balíček pro úpravu stylu kapitol a sekcí
\titleformat{\chapter}[block]{\scshape\bfseries\LARGE}{\thechapter}{10pt}{\vspace{0pt}}[\vspace{-22pt}]
\titleformat{\section}[block]{\scshape\bfseries\Large}{\thesection}{10pt}{\vspace{0pt}}
\titleformat{\subsection}[block]{\bfseries\large}{\thesubsection}{10pt}{\vspace{0pt}}


\usepackage{tocloft} % Balíček umožní přizpůsobit vzhled tabulky obsahu
\setlength{\cftbeforechapskip}{0pt}  % Menší rozestup pro kapitoly
\setlength{\cftbeforesecskip}{0pt}   % Menší rozestup pro sekce

\setcounter{secnumdepth}{2}
\setcounter{tocdepth}{1}
\usepackage{fancyhdr}
\pagestyle{fancy}
\renewcommand{\headrulewidth}{0.025pt}

\usepackage{booktabs}

\usepackage{url}

%% Balíčky co se můžou hodit :) 
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\usepackage{pdfpages} %% Balíček umožňující vkládat stránky z PDF souborů, 

\usepackage{upgreek} %% Balíček pro sazbu stojatých řeckých písmen, třeba u jednotky mikrometr. Například stojaté mí: \upmu, stojaté pí: \uppi

\usepackage{amsmath}    %% Balíčky amsmath a amsfonts 
\usepackage{amsfonts}   %% pro sazbu matematických symbolů
\usepackage{esint}     %% pro sazbu různých integrálů (např \oiint)
\usepackage{mathrsfs}
\usepackage{helvet} % Helvet font
\usepackage{mathptmx} % Times New Roman
\usepackage{Oswald} % Oswald font


%% makra pro sazbu matematiky
\newcommand{\dif}{\mathrm{d}} %% makro pro sazbu diferenciálu, místo toho
%% abych musel psát '\mathrm{d}' mi stačí napsat '\dif' což je mnohem 
%% kratší a mohu si tak usnadnit práci

\usepackage{listings}
\usepackage{xcolor}

\renewcommand{\lstlistingname}{Kód}% Listing -> Algorithm
\renewcommand{\lstlistlistingname}{Seznam programových kódů}% List of Listings -> List of Algorithms

%% Definice 
\lstdefinelanguage{JavaScript}{
	morekeywords=[1]{break, continue, delete, else, for, function, if, in,
		new, return, this, typeof, var, void, while, with},
	% Literals, primitive types, and reference types.
	morekeywords=[2]{false, null, true, boolean, number, undefined,
		Array, Boolean, Date, Math, Number, String, Object},
	% Built-ins.
	morekeywords=[3]{eval, parseInt, parseFloat, escape, unescape},
	sensitive,
	morecomment=[s]{/*}{*/},
	morecomment=[l]//,
	morecomment=[s]{/**}{*/}, % JavaDoc style comments
	morestring=[b]',
	morestring=[b]"
}[keywords, comments, strings]


\lstdefinelanguage[ECMAScript2015]{JavaScript}[]{JavaScript}{
	morekeywords=[1]{await, async, case, catch, class, const, default, do,
		enum, export, extends, finally, from, implements, import, instanceof,
		let, static, super, switch, throw, try},
	morestring=[b]` % Interpolation strings.
}

\lstalias[]{ES6}[ECMAScript2015]{JavaScript}

% Nastavení barev
% Requires package: color.
\definecolor{mediumgray}{rgb}{0.3, 0.4, 0.4}
\definecolor{mediumblue}{rgb}{0.0, 0.0, 0.8}
\definecolor{forestgreen}{rgb}{0.13, 0.55, 0.13}
\definecolor{darkviolet}{rgb}{0.58, 0.0, 0.83}
\definecolor{royalblue}{rgb}{0.25, 0.41, 0.88}
\definecolor{crimson}{rgb}{0.86, 0.8, 0.24}

% Nastavení pro Python
\lstdefinestyle{Python}{
	language=Python,
	backgroundcolor=\color{white},
	basicstyle=\ttfamily,
	breakatwhitespace=false,
	breaklines=false,
	captionpos=b,
	columns=fullflexible,
	commentstyle=\color{mediumgray}\upshape,
	emph={},
	emphstyle=\color{crimson},
	extendedchars=true,  % requires inputenc
	fontadjust=true,
	frame=single,
	identifierstyle=\color{black},
	keepspaces=true,
	keywordstyle=\color{mediumblue},
	keywordstyle={[2]\color{darkviolet}},
	keywordstyle={[3]\color{royalblue}},
	literate=%
	{á}{{\'a}}1 {č}{{\v{c}}}1 {ď}{{\v{d}}}1 {é}{{\'e}}1 {ě}{{\v{e}}}1
	{í}{{\'i}}1 {ň}{{\v{n}}}1 {ó}{{\'o}}1 {ř}{{\v{r}}}1 {š}{{\v{s}}}1
	{ť}{{\v{t}}}1 {ú}{{\'u}}1 {ů}{{\r{u}}}1 {ý}{{\'y}}1 {ž}{{\v{z}}}1,		
	numbers=left,
	numbersep=5pt,
	numberstyle=\tiny\color{black},
	rulecolor=\color{black},
	showlines=true,
	showspaces=false,
	showstringspaces=false,
	showtabs=false,
	stringstyle=\color{forestgreen},
	tabsize=2,
	title=\lstname,
	upquote=true  % requires textcomp	
}


\lstdefinestyle{JSES6Base}{
	backgroundcolor=\color{white},
	basicstyle=\ttfamily,
	breakatwhitespace=false,
	breaklines=false,
	captionpos=b,
	columns=fullflexible,
	commentstyle=\color{mediumgray}\upshape,
	emph={},
	emphstyle=\color{crimson},
	extendedchars=true,  % requires inputenc
	fontadjust=true,
	frame=single,
	identifierstyle=\color{black},
	keepspaces=true,
	keywordstyle=\color{mediumblue},
	keywordstyle={[2]\color{darkviolet}},
	keywordstyle={[3]\color{royalblue}},
 literate=%
{á}{{\'a}}1 {č}{{\v{c}}}1 {ď}{{\v{d}}}1 {é}{{\'e}}1 {ě}{{\v{e}}}1
{í}{{\'i}}1 {ň}{{\v{n}}}1 {ó}{{\'o}}1 {ř}{{\v{r}}}1 {š}{{\v{s}}}1
{ť}{{\v{t}}}1 {ú}{{\'u}}1 {ů}{{\r{u}}}1 {ý}{{\'y}}1 {ž}{{\v{z}}}1,		
	numbers=left,
	numbersep=5pt,
	numberstyle=\tiny\color{black},
	rulecolor=\color{black},
	showlines=true,
	showspaces=false,
	showstringspaces=false,
	showtabs=false,
	stringstyle=\color{forestgreen},
	tabsize=2,
	title=\lstname,
	upquote=true  % requires textcomp
}

\lstdefinestyle{JavaScript}{
	language=JavaScript,
	style=JSES6Base,
}
\lstdefinestyle{ES6}{
	language=ES6,
	style=JSES6Base
}


%% Bordel pro práci - můžeš smáznout :) 
%%%%%%%%%%%%%%%%%%%

\usepackage{lipsum} %% balíček který píše lipsum (nesmyslný text, který se používá pro kontrolu typografie)

%% Začátek dokumentu
%%%%%%%%%%%%%%%%%%%%
\begin{document}
	
	\pagestyle{empty}
	\pagenumbering{Roman}
	
	\cleardoublepage

%% Titulní stránka s informacemi
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
	
	{\fontfamily{phv}\selectfont
		%% Logo školy
		\begin{figure}[h]
			\centering
			\includegraphics[width=0.6\linewidth]{image/logo-skoly.png} 
		\end{figure}
		
		
		%% Hlavička práce a její název (viz proměnná \nazev prace)
		%% \sffamily %%% bezpatkové písmo - sans serif
		{\bfseries %%% písmo na stránce je tučně
			\begin{center}
				\vspace{0.025 \textheight}
				\LARGE{ZÁVĚREČNÁ STUDIJNÍ PRÁCE}\\
				\large{dokumentace}\\
				\vspace{0.075 \textheight}
				\LARGE {\nazevPrace}\\
			\end{center}  
		}%%%
		
		\begin{figure}[h]
			\centering
			\includegraphics[width=0.8\linewidth]{image/programovani-02.jpg} 
		\end{figure}
		
		\vspace{0.02 \textheight}
		\begin{table}[h!]
			\begin{tabular}{ll}
				\textbf{Autor:} & \jmenoAutora\\ 
				\textbf{Obor:} & \kodOboru { } \obor\\
				\textbf{} & \zamereni\\
				\textbf{Třída:} & \trida\\
				\textbf{Školní rok:} & \skolniRok\\
			\end{tabular}
			
		\end{table}		
	}
	
\cleardoublepage %% Zalomení dvojstránky
	
%% Stránka obsahující poděkování a prohlášení
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%% Poděkování - nepovinné
%%%%%%%%%%%%%%%%%%%%%%%%%%%%
	
	\noindent{\large{\bfseries\textit{Poděkování}\\}}
	\noindent\textit{Na úvod bych chtěl poděkovat panu učiteli Mgr. Marku Lučnému za ochotu a podporu při tvorbě tohoto projektu.}
	
	\vspace*{0.7\textheight} %% Vertikální mezeru je možné upravit

%% Prohlášení - povinné
%%%%%%%%%%%%%%%%%%%%%%%%%%%%
	\noindent{\large{\bfseries{Prohlášení}\\}}  %% uprav si koncovky podle toho na jaký rod se cítíš, vypadá to pak lépe :) 
	\noindent{Prohlašuji, že jsem závěrečnou práci vypracoval samostatně a uvedl veškeré použité 
		informační zdroje.\\}
	\noindent{Souhlasím, aby tato studijní práce byla použita k výukovým a prezentačním účelům na Střední průmyslové a umělecké škole v Opavě, Praskova 399/8.}
	\vfill
	\noindent{V Opavě \datumOdevzdani\\}
	\noindent
	\begin{minipage}{\linewidth}
		\hspace{9.5cm} 
		\begin{tabular}{@{}p{6cm}@{}}
			\dotfill \\
			Podpis autora
		\end{tabular}
	\end{minipage}
	
	\cleardoublepage %% Zalomení dvojstránky

%% Stránka obsahující abstrakt (anotaci)
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%	

%% Abstrakt v češtině
%%%%%%%%%%%%%%%%%%%%%%%%%%%%
	\noindent{\Large{\bfseries{Abstrakt}\\}}
	\noindent Tato práce se zaměřuje na vytvoření webové aplikace s autentizací uživatelů pomocí webového frameworku Django. Hlavním cílem projektu je implementace autentizace uživatelů prostřednictvím účtů GitHub a Microsoft, spolu s možností úpravy uživatelského profilu. Pro dosažení znovupoužitelnosti byl vyvinut backend, který může být integrován do jiných aplikací. Využití technologií jako Django, django-allauth, PostgreSQL a Docker zajišťuje robustnost a efektivitu aplikace. Gunicorn a Nginx byly zvoleny k obsluze webových požadavků, což přispívá k vysoké úrovni výkonu a škálovatelnosti. Soft UI Dashboard poskytuje moderní a přehledné prostředí administrace. Celková funkčnost aplikace je demonstrována na jednoduchém příkladu užití. Díky těmto implementacím má práce potenciál sloužit jako výchozí rámec pro vytváření dalších webových aplikací s podobnými požadavky na autentizaci uživatelů.
	
	\vspace{18pt}
	
	\noindent{\large{\bfseries{Klíčová slova}}}
	
	\noindent Django, webová aplikace, autentizace uživatelů, úprava profilu, znovupoužitelný backend
	
	\vspace{18pt}

%% Abstrakt v angličtině
%%%%%%%%%%%%%%%%%%%%%%%%%%%%	
	\noindent{\Large{\bfseries{Abstract}}}
	
	\noindent This work focuses on creating a web application with user authentication using the Django web framework. The main project objective is to implement user authentication through GitHub and Microsoft accounts, along with the capability to edit user profiles. To achieve reusability, a backend has been developed, which can be integrated into other applications. Utilizing technologies such as Django, django-allauth, PostgreSQL, and Docker ensures the robustness and efficiency of the application. Gunicorn and Nginx have been chosen to handle web requests, contributing to a high level of performance and scalability. The Soft UI Dashboard provides a modern and clear administrative interface. The overall functionality of the application is demonstrated through a simple use case. Thanks to these implementations, the work has the potential to serve as a foundational framework for developing additional web applications with similar user authentication requirements.
	
	\vspace{18pt}
	
	\noindent{\large{\bfseries{Keywords}}}
	
	\noindent Django, web application, user authentication, profile editing, reusable backend
	
	\clearpage %% Zalomení stránky

%% Stránka s generovaným obsahem
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%	
	
	\tableofcontents %% Vygeneruje tabulku s obsahem

	\pagenumbering{arabic} %% Nastavení způsobu číslování stránek (alternativy roman | Roman)
	\setcounter{page}{1} %% Nastavení počitadla stránek

%% Stránka s úvodem - povinná část
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%		
	\chapter*{Úvod}
%Tento příkaz vytvoří novou kapitolu s názvem "Úvod" ve vašem dokumentu.
%Hvězdička * u příkazu \chapter* znamená, že tato kapitola nebude mít číslo. Ve výsledném dokumentu se tedy objeví jako "Úvod" bez předcházejícího čísla kapitoly, které se obvykle zobrazuje u číslovaných kapitol.
%Tento příkaz také znamená, že kapitola se automaticky neobjeví v obsahu, protože LaTeX standardně zahrnuje do obsahu pouze číslované kapitoly.
	\addcontentsline{toc}{chapter}{Úvod}
%Tento příkaz ručně přidává záznam do obsahu.
%První parametr toc označuje, že přidáváme záznam do Table of Contents (obsahu).
%Druhý parametr chapter specifikuje úroveň záznamu. V tomto případě říkáme, že přidávaný záznam má být považován za kapitolu.
%Třetí parametr Úvod je text, který se objeví v obsahu. V tomto případě bude v obsahu zobrazen název "Úvod".	
Mým cílem bylo vytvořit aplikační backend, který se bude starat o autentizaci uživatelů. Hlavním úkolem bylo umožnit uživatelům přihlašování skrze účty GitHub a Microsoft.

\noindent{\bfseries{Proč jsem si vybral toto téma?}}

\noindent Každý student naší školy má účty GitHub a Microsoft. Proto jsem se rozhodl pro tento projekt – chtěl jsem vytvořit autentizační backend, jejž můžou učitelé naší školy použít pro své vlastní aplikace.

\noindent{\bfseries{Proč zrovna tyto technologie?}}

\noindent S webovým frameworkem Django jsme ve škole pracovali, což mi poskytlo solidní základy. Chtěl jsem využít svých znalostí ze studia a zároveň se něco naučit o ostatních technologiích, které řeší problematiku autentizace.

\noindent{\bfseries{Struktura dokumentace}}

\noindent Tato dokumentace popisuje -

%Tipy k psaní úvodu
%Je povinný, nadpis neměňte, rozsah - max. 1 strana. 
%Tato část práce obsahuje: 
%* náhled do řešené problematiky, zdůvodnění volby problematiky, 
%* předem definované cíle práce, 
%* motivaci pro další čtení textu včetně stručného uvedení obsahu následujících kapitol 


\chapter{Webová aplikace}

\section{Úvod}
\label{sec:uvodwebovaaplikace}
Webová aplikace je aplikace poskytovaná uživatelům z webového serveru přes počítačovou síť Internet. Uživatelé mohou přistupovat k webovým aplikacím prostřednictvím webového prohlížeče, takže nemusí instalovat žádný speciální software na svých zařízeních.

\section{Statické a dynamické webové stránky}
\label{sec:statickeadynamickewebovestranky}
Webová aplikace obsahuje stránky s částečně nebo úplně neurčeným obsahem. Konečný obsah stránky se určí až tehdy, když návštěvník požádá o stránku z webového serveru. Webová aplikace je kolekcí statických a dynamických webových stránek.

\subsection{Zpracování statických stránek}
Když webový server přijme požadavek na statickou webovou stránku, pošle ji přímo prohlížeči, který o ni požádal. Statická webová stránka se nemění.
	\begin{figure}[h!]
		\centering
		\includegraphics[width=0.5\textwidth]{image/staticke.png}
		\caption{Zpracování statické webové stránky}
		\label{fig:statickastranka}
	\end{figure}

\subsection{Zpracování dynamických stránek}
Naproti tomu, když webový server přijme požadavek na dynamickou stránku, předá stránku aplikačnímu serveru, který odpovídá za dokončení stránky. Aplikační server si přečte kód na stránce, dokončí stránku podle instrukcí v kódu a pak odstraní kód ze stránky.
	\begin{figure}[h!]
		\centering
		\includegraphics[width=0.5\textwidth]{image/dynamicke.png}
		\caption{Zpracování dynamické webové stránky}
		\label{fig:dynamickastranka}
	\end{figure}

\section{Webový server}
\label{webovyserver}

Webový server je software, který posílá webové stránky na základě požadavků od webových prohlížečů. Požadavek na stránku se generuje, když návštěvník ve webovém prohlížeči klepne na odkaz na webové stránce, vybere záložku nebo zadá adresu URL do textového pole pro adresu.

\section{Aplikační server}
\label{aplikacniserver}

Aplikační server je software, který pomáhá webovému serveru zpracovat webové stránky obsahující skripty nebo tagy na straně serveru. Když webový server přijme požadavek na takovou stránku, předá stránku aplikačnímu serveru ke zpracování, než ji pošle prohlížeči.

\newpage

\section{Databáze}
\label{databaze}

Databáze je kolekce dat uložených v tabulkách. Každý řádek tabulky představuje jeden záznam a každý sloupec představuje pole v záznamu.

\subsection{Přistupování k databázi}
Aplikační server vám umožňuje pracovat s prostředky na straně serveru, jako jsou například databáze. Využitím databáze k uložení obsahu můžete návrh webu oddělit od datového obsahu, který chcete zobrazovat.
	\begin{figure}[h!]
		\centering
		\includegraphics[width=0.8\textwidth]{image/databaze.png}
		\caption{Přistupování k databázi}
		\label{fig:pristupovanikdatabazi}
	\end{figure}

\chapter{Framework}

\section{Úvod}
\label{uvodframework}

Framework je softwarová struktura pro podporu programování, vývoje a organizaci jiných softwarových projektů. Může obsahovat podpůrné programy, knihovny API, podporu pro návrhové vzory nebo doporučené postupy při vývoji. Cílem frameworku je převzetí typických problémů dané oblasti, což umožní, aby se návrháři a vývojáři mohli soustředit pouze na své zadání.

\section{Django}
\label{django}

Django IPA je open source webový aplikační framework napsaný v Pythonu, který se volně drží architektury Model-Pohled-Šablona. Hlavním úkolem Djanga je snadné vytvoření komplexních, databází řízených webových aplikací. Zaměřuje se na znovupoužitelnost a propojitelnost komponent, rychlý vývoj, v duchu „DRY“ (Don’t Repeat Yourself) – neopakovat se.
	\begin{figure}[h!]
		\centering
		\includegraphics[width=0.7\textwidth]{image/django-diagram.png}
		\caption{Diagram frameworku Django}
		\label{fig:djangodiagram}
	\end{figure}

\subsection{Historie}
Django bylo původně navrženo pro správu několika zpravodajsky orientovaných stránek společnosti The World Company v Lawrenci v Kansasu; později, v červnu 2005, bylo vydáno veřejně pod open-sourceovou licencí BSD. Framework byl pojmenován po jazzovém kytaristovi Django Reinhardtovi.

\section{Model-Pohled-Šablona}
\label{modelpohledsablona}

Model-View-Controller a je architektonický vzor, který je běžně používán při vývoji webových aplikací. V případě frameworku Django se tato architektura označuje jako Model-Pohled-Šablona (Model-View-Template).
	\begin{figure}[h!]
		\centering
		\includegraphics[width=0.7\textwidth]{image/django-mvt.png}
		\caption{Architektura Model-Pohled-Šablona}
		\label{fig:mvp}
	\end{figure}

\subsection{Model}
Model reprezentuje datovou strukturu aplikace. Může to být například databázová tabulka, kde jsou ukládána data. Ve frameworku Django se modely definují jako třídy, které dědí od předdefinovaných modelových tříd poskytovaných frameworkem.
\begin{lstlisting}[style=Python, caption={Příklad modelu Uživatel}]
	# models.py
	from django.contrib.auth.models import AbstractUser
	from django.db import models
	class CustomUser(AbstractUser):
    	email = models.EmailField(unique=True)
    	username = models.CharField(unique=True, max_length=30)
    	profile_picture = models.ImageField(upload_to='profile_pictures/')
\end{lstlisting}

\subsection{Pohled}
Pohled je část, která zpracovává požadavky od uživatelů a reaguje na ně. Obsahuje logiku pro získání dat z modelu a přípravu dat pro zobrazení. V Djangu se pohledy jsou implementovány jako funkce nebo třídy.
\begin{lstlisting}[style=Python, caption={Příklad pohledu Kvíz}]
	# views.py
	from django.shortcuts import render
	def quiz(request):
   	user = request.user
   	return render(request, 'quiz/quiz.html', {'user': user})
\end{lstlisting}

\subsection{Šablona}
Šablona definuje, jak jsou data zobrazena uživateli. Jedná se o prezentaci, která může obsahovat HTML, CSS a speciální značky nebo proměnné, které jsou nahrazeny konkrétními daty během zpracování. Ve frameworku Django jsou šablony soubory s příponou .html, které oddělují prezentaci od logiky pohledu.
\begin{lstlisting}[style=Python, caption={Příklad základní šablony}]
	# base.html
	<!DOCTYPE html>
	<html>
	<head>
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<title>DSA - {% block head_title %}{% endblock head_title %}</title>
		<link href='{% static "style.css" %}' rel='stylesheet'>
	</head>
	{% include 'components/navbar.html' %}
	<body>
	{% block content %}
	{% endblock content %}
	</body>
	{% include 'components/footer.html' %}
	</html>
\end{lstlisting}

\section{Struktura projektu}
\label{strukturaprojektu}

Projekty v Djangu mají specifickou strukturu, která pomáhá organizovat kód, šablony, statické soubory a další komponenty. Po instalaci Djanga se nový projekt vytvoří příkazem django-admin startproject (název projektu).
	\begin{figure}[h!]
		\centering
		\includegraphics[width=0.7\textwidth]{image/django-struktura.jpg}
		\caption{Struktura projektu Django}
		\label{fig:djangostruktura}
	\end{figure}
\subsection{Soubory projektu}
Adresář projektu po první konfiguraci bude obsahovat tyto soubory:
\begin{itemize}
	\item manage.py – Script, který má na starosti správu projektu,
	\item settings.py – Konfigurační script společný všem aplikacím v projektu,
	\item urls.py – Globální konfigurace URL.
\end{itemize}
\subsection{Soubory aplikace}
Vytvoření struktury nové aplikace proběhne po spuštění příkazu python manage.py startapp (název aplikace). Po spuštění tohoto scriptu se vytvoří podadresář se strukturou:
\begin{itemize}
	\item views.py – Obsahuje jednotlivé view funkce,
	\item urls.py – Obsahuje mapování URL na jednotlivá view,
	\item models.py – Obsahuje popis datového modelu aplikace,
	\item tests.py – Obsahuje jednotkové testy.
\end{itemize}

\chapter{Využité technologie}

\section{Django}
\label{sec:django}
Django IPA je open source webový aplikační framework napsaný v Pythonu, který se volně drží architektury Model-Pohled-Šablona.
	\begin{figure}[h!]
		\centering
		\includegraphics[width=0.2\textwidth]{image/logo-django.png}
		\caption{Django}
		\label{fig:logodjango}
	\end{figure}

\section{Django-allauth}
\label{sec:django-allauthl}
Django-allauth je integrovaná sada aplikací Django řešící autentizaci, registraci a správu účtů třetích stran.

\section{PostgreSQL}
\label{sec:postgresql}
PostgreSQL je objektově-relační databázový systém. Na jeho vývoji se podílí globální komunita vývojářů a firem.
	\begin{figure}[h!]
		\centering
		\includegraphics[width=0.2\textwidth]{image/logo-postgresql.png}
		\caption{PostgreSQL}
		\label{fig:postgresql}
	\end{figure}

\newpage

\section{Docker}
\label{sec:docker}
Docker je open source software, jehož cílem je poskytnout jednotné rozhraní pro izolaci aplikací do kontejnerů.
	\begin{figure}[h!]
		\centering
		\includegraphics[width=0.3\textwidth]{image/logo-docker.png}
		\caption{Docker}
		\label{fig:docker}
	\end{figure}

\section{Gunicorn}
\label{sec:gunicorn}
Gunicorn je open-source WSGI server napsaný v Pythonu, používaný pro spouštění webových aplikací. Jeho hlavním cílem je poskytovat efektivní a spolehlivé zpracování HTTP požadavků.
	\begin{figure}[h!]
		\centering
		\includegraphics[width=0.3\textwidth]{image/logo-gunicorn.jpg}
		\caption{Gunicorn}
		\label{fig:gunicorn}
	\end{figure}

\section{Nginx}
\label{sec:nginx}
Nginx je softwarový open source webový server. Pracuje s protokoly HTTP (HTTPS), SMTP, POP3, IMAP a SSL. Zaměřuje se především na vysoký výkon a nízké nároky na paměť.
	\begin{figure}[h!]
		\centering
		\includegraphics[width=0.2\textwidth]{image/logo-nginx.jpg}
		\caption{Nginx}
		\label{fig:nginx}
	\end{figure}

\newpage

\section{Soft UI Dashboard}
\label{sec:softuidashboard}
Soft UI Dashboard je šablona administrace vytvořená pomocí Bootstrap 5.
	\begin{figure}[h!]
		\centering
		\includegraphics[width=0.6\textwidth]{image/soft-ui-dashboard.jpg}
		\caption{Soft UI Dashboard}
		\label{fig:softuidashboard}
	\end{figure}

\chapter{Způsoby řešení, použité postupy}
Při hledání vhodné technologie pro tuto aplikaci jsem narazil na Django. Tento webový aplikační framework je v problematice autentizace často využíván. S Djangem jsem navíc pracovali ve škole, tak jsem se rozhodl mích znalostí využít a Django použít.

\section{Vytvoření projektu}
\label{sec:vytvoreniprojektu}
Prvním krokem bylo vytvoření projektu. Stačilo nainstalovat Python a framework Django. Příkazem se poté vytvořila základní struktura.

\section{Autentizace Django-allauth}
\label{sec:autentizacedjango-allauth}
Dále bylo mým úkolem umožnit uživatelům registraci a přihlášení pomocí aplikací třetích stran (GitHub a Microsoft). Pro tuto funkci jsem zvolil balíček django-allauth, který proces vytváření autentizace značně urychlil a autentizaci zabezpečil.
	\begin{figure}[h!]
		\centering
		\includegraphics[width=0.4\textwidth]{image/login.png}
		\caption{Formulář přihlášení}
		\label{fig:formularprihlaseni}
	\end{figure}

\subsection{Aplikace třetích stran}
Balíček django-allauth bylo potřeba nainstalovat. Poté jsem musel udělat pár změn v settings.py. Pro funkčnost přihlášení aplikací třetích stran jsem musel tyto aplikace přidat do struktury SOCIALACCOUNT\_PROVIDERS. K tomu jsem potřeboval klíče těchto poskytovatelů, ty jsem získal zaregistrováním a nastavením aplikací OAuth.

\subsection{Kontrola funkčnosti}
Pro kontrolu funkčnosti jsem django-allauth musel přidat do cest urls.py a vytvořit jednoduchý pohled ve views.py, který vracel šablonu základní stránky.

\section{Vlastní uživatelský model}
\label{sec:vlastniuzivatelskymodel}
Pro využití vlastního modelu uživatele jsem v models.py vytvořil model User, který vycházel z Django AbstractUser. Tomuto modelu jsem přiřadil email, uživatelské jméno a profilové foto, vše s patřičnými parametry. Model jsem nakonec musel zaregistrovat v admin.py aplikace a nastavit v settings.py.

\section{Citlivá data}
\label{sec:citlivadata}
Dalším úkolem bylo aplikaci zdockerizovat. Před tím jsem se však musel postarat o citlivá data (klíče aplikací třetích stran a Djanga samotného). Tyto data jsem se ze souborů rozhodl skrýt a všechna umístit do jednoho souboru .env.

\subsection{Python-decouple}
Abych poté mohl k datům přistupovat nainstaloval jsem balíček python-decouple. Následně stačilo z balíčku importovat object config a citlivé proměnné nahradit config("název proměnné v souboru .env").

\section{Dockerizace aplikace}
\label{sec:dockerizaceaplikace}
Dockerizace je proces přizpůsobení a zapouzdření aplikace do kontejneru pomocí technologie Docker. Kontejner je samostatný a izolovaný balíček, který obsahuje veškeré potřebné souboru aplikace.
\subsection{Docker Desktop}
Jako první jsem si nainstaloval program Docker Desktop, který umožňuje práci s kontejnery v grafickém prostředí.
\subsection{Docker Compose}
Dále jsem také využil nástroj Docker Compose, díky nemuž jsem mohl definovat a spouštět více kontejnerů současně jako součást jedné aplikace. V mém případě to byl jeden kontejner s databází a jeden kontejner se samotnou aplikací.
	\begin{figure}[h!]
		\centering
		\includegraphics[width=0.7\textwidth]{image/kontejnery.png}
		\caption{Docker kontejnery}
		\label{fig:dockerkontejnery}
	\end{figure}

\section{Administrace}
\label{sec:administrace}
Pro administraci uživatelů jsem se rozhodl použít původní administraci Djanga a upravit si její vzhled podle mých preferencí.
	\begin{figure}[h!]
		\centering
		\includegraphics[width=0.7\textwidth]{image/administrace.png}
		\caption{Administrace na adrese /admin}
		\label{fig:administracesoftuidashboard}
	\end{figure}
\subsection{Šablona Soft UI Dashboard}
K úpravě administrace jsem vybral šablonu vytvořenou pomocí Bootstrap 5 Soft UI Dashboard. Tuto technologii lze získat dvěma způsoby - stáhnutím souborů z GitHubu nebo nainstalováním balíčku django-admin-soft-dashboard. Rozhodl jsem se využít druhou možnost a balíček nainstaloval. 

\section{Databáze PostgreSQL}
\label{sec:databazepostgresql}
Django v základním nastavení používá databázi SQLite, ta ale pro produkční účely není vhodná. Databázi SQLite jsem proto vyměnil za velice populární databázi PostgreSQL, která má dobrou podporu Djangem. Databázi jsem vytvořil a propojil s aplikací.
\subsection{Docker entrypoint}
Vytvoření souboru entrypoint.sh, který využívá Docker entrypoint přišelo vhod, protože tento soubor zkontroluje funkčnost databáze předtím, než se aplikace nastartuje.

\section{Příprava aplikace pro produkční účely}
\label{sec:produkce}
Aby aplikace mohla v budoucnu efektivně fungovat také v produkci, musel jsem dodělat pár úprav.
\subsection{Gunicorn}
Rozhodl jsem se využít Gunicorn, aby aplikace mohla efektivně a rychle zpracovávat webové požadavky.
\subsection{Produkční Dockerfile}
Dále jsem upravil soubor s citlivými daty a vytvořil Dockerfile speciálně pro produkci.
\subsection{Nginx}
Nginx použitý jako reverse proxy pro Gunicorn mi umožnil efektivní přijímání požadavků od klientů a řešení statických souborů.

\chapter{Výsledky řešení, uživatelský manuál}
Výsledkem práce je webová aplikace v Djangu, která řeší autentizaci a administraci uživatelů.
\section{Funkce aplikace}
\label{sec:funkceaplikace}
\subsection{Uživatel}
Když uživatel navštíví webovou stránku, vyskočí na něj okno s varováním, že není přihlášený. Uživatel se může přihlásit nebo zaregistrovat. K tomu může použít přihlášení aplikace třetích stran, GitHub nebo Microsoft. Po úspěšné autentizaci se uživateli zobrazí profilová stránka, kde uvidí svou profilovou fotku, uživatelské jméno a email. Uživatel se následně může odhlásit nebo upravit svůj profil. Když zůstane přihlášený a vrátí se na stránku kvízu, kvíz se mu zobrazí.
\subsection{Administrátor}
Administrátor aplikace může přejít na stránku /admin, kde se musí přihlásit. Do této administrace má přístup pouze administrátorský účet, prostý uživatel má přistup zamítnut. Když se administrátor přihlásí, může si zobrazit seznam uživatelů aplikace a upravit jejich profil manuálně přímo z administrace.
\section{Splněné a nesplněné cíle}
\label{sec:cile}
Splněné cíle:
\begin{itemize}
	\item Funkční autentizační webová aplikace v Djangu,
	\item umožnění uživatelům autentizaci skrze účty GitHub a Microsoft a úravu jejich profilu,
	\item  poskytnutí znovupoužitelného backendu pro jiné aplikace.
\end{itemize}
Nesplněné cíle:
\begin{itemize}
	\item Běh aplikace na produkčním webovém serveru.
\end{itemize}

\chapter{Závěr}
		\begin{thebibliography}{99}
		\bibitem{sablonaSOC} DOKULIL Jakub. \textit{Šablona pro psaní SOČ v programu \LaTeX} [Online]. Brno, 2020 [cit. 2020-08-24]. Dostupné z: \url{https://github.com/Kubiczek36/SOC_sablona}
		\bibitem{LaTeXprirucka}OETIKER, Tobias, Hubert PARTL, Irene HYNA, Elisabeth SCHEGL, Michal KOČER a Pavel SÝKORA. \textit{Ne příliš stručný úvod do systému LaTeX2e} [online]. 1998 [cit. 2020-08-24]. Dostupné z: \url{https://www.jaroska.cz/elearning/informatika/typografie/lshort2e-cz.pdf}
		\bibitem{wikibooksLaTeX}\textit{Wikibooks: LaTeX} [online]. San Francisco (CA): Wikimedia Foundation, 2001- [cit. 2020-08-24]. Dostupné z: \url{https://en.wikibooks.org/wiki/LaTeX}
		\bibitem{stackExchange} \textit{TeX - LaTeX Stack Exchange} [online]. Stack Exchange, 2020 [cit. 2020-09-01]. Dostupné z: \url{https://tex.stackexchange.com}
		\bibitem{sspuLogo} \textit{Střední škola průmyslová a umělecká Opava} [online]. [cit. 2023-11-11]. Dostupné z: \url{https://www.sspu-opava.cz}
		\bibitem{citacePRO}\textit{Citace PRO} [online]. Citace.com, 2020 [cit. 2020-08-31]. Dostupné z: \url{https://www.citacepro.com}
		\bibitem{Born2019} BORN, Max a Emil WOLF. \textit{Principles of optics: electromagnetic theory of propagation, interference and diffraction of light}. 7th (expanded) edition. Reprinted wirth corrections 2002. 15th printing 2019. Cambridge: Cambridge University Press, 2019. ISBN 978-0-521-64222-4.
	\end{thebibliography}	
\end{document}